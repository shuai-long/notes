const LS_THEME_MANAGER_DOCSIFY_THEME="docsifyTheme",LS_PRISM_THEME_MANAGER_PRISM_THEME="prism-theme",LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS="docsify-custom-css",LS_CSS_CHANGE_DOCSIFY_CSS_VAR_SEARCH_HISTORY="cssVarSearchHistory";(function(){var n=localStorage.getItem(LS_THEME_MANAGER_DOCSIFY_THEME);if(!n&&window.matchMedia&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),n){var e=document.querySelector('link[title="light"]'),t=document.querySelector('link[title="dark"]');e&&t&&("dark"===n?(e.disabled=!0,t.disabled=!1):(e.disabled=!1,t.disabled=!0)),localStorage.setItem(LS_THEME_MANAGER_DOCSIFY_THEME,n)}})(),window.$docsify=window.$docsify||{},window.$docsify.plugins=(window.$docsify.plugins||[]).concat(function(n,e){n.mounted(function(){const n=(()=>{function n(){o="dark"===o?"light":"dark";const n=document.getElementById("themeable-setting");n&&n.remove(),a&&(a.disabled="light"!==o),i&&(i.disabled="dark"!==o),document.documentElement.setAttribute("data-theme",o);try{localStorage.setItem(LS_THEME_MANAGER_DOCSIFY_THEME,o)}catch(n){}t();const e=new CustomEvent("theme-change",{detail:o});document.dispatchEvent(e)}function e(n){r.add(n),t()}function t(){const n="dark"===o?"fa-sun":"fa-moon",e="dark"===o?"亮色主题":"暗色主题";r.forEach(t=>{const o=t.querySelector("i");o&&(o.className=`fas ${n}`);const a=t.querySelector(".button-label");a&&(a.textContent=e)})}let o;try{o=localStorage.getItem(LS_THEME_MANAGER_DOCSIFY_THEME)}catch(n){o=null}o||(o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-theme",o);const a=document.getElementById("docsify-theme-light")||document.querySelector('link[data-theme="light"][rel="stylesheet"]'),i=document.getElementById("docsify-theme-dark")||document.querySelector('link[data-theme="dark"][rel="stylesheet"]');a&&(a.disabled="light"!==o),i&&(i.disabled="dark"!==o);const r=new Set;return{toggle:n,registerThemeButton:e,updateThemeElements:t,get isDark(){return"dark"===o}}})(),e=function(){async function n(){try{const n=await fetch("/notes/metadata/css-vars-config.json");u=await n.json(),Array.isArray(u.cssVariables)||(console.error('配置文件格式错误，应为 { "cssVariables": [...] }'),u.cssVariables=[])}catch(n){console.error("配置文件加载失败:",n),u.cssVariables=[]}}function e(){const n=document.createElement("div"),e=n.attachShadow({mode:"open"}),t=document.createElement("style");t.textContent='\n        :host {\n          display: none !important;\n          justify-content: center;\n          align-items: flex-start;\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: rgba(0,0,0,0.6);\n          backdrop-filter: blur(3px);\n          z-index: 10000;\n          transition: opacity 0.3s ease;\n          overflow: auto;\n          padding: 40px 20px;\n          opacity: 0;\n        }\n      \n        :host(.active) {\n          display: flex !important;\n          justify-content: center;\n          align-items: flex-start;\n          opacity: 1;\n        }\n      \n        .container {\n          display: flex;\n          flex-direction: row;\n          background: #f8f9fa;\n          border-radius: 12px;\n          box-shadow: 0 10px 30px rgba(0,0,0,0.15);\n          width: 90%;\n          max-width: 90%\n          min-height: 60vh;\n          max-height: 90vh;\n          transform: translateY(-20px);\n          transition: transform 0.3s ease;\n          position: relative;\n        }\n      \n        :host(.active) .container {\n          transform: translateY(0);\n        }\n      \n        /* 左侧面板 */\n        .left-panel {\n          flex: 0 0 40%;\n          display: flex;\n          flex-direction: column;\n          border-right: 1px solid rgba(0,0,0,0.08);\n          background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);\n          padding: 25px;\n        }\n      \n        /* 右侧面板 */\n        .right-panel {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          padding: 25px;\n          position: relative;\n          min-width: 0; /* 修复内容溢出 */\n        }\n        .color-block{\n          width: 1em;\n          height: 1em;\n          margin-left: .5em;\n        }\n\n        .vars-container {\n            height: 81%;\n            overflow-y: auto;\n            overflow-x: hidden; /* 新增：隐藏横向溢出 */\n            border-radius: 8px;\n            border: 1px solid #e0e3e7;\n            background: #fff;\n            margin: 10px auto;\n            width: 100%;\n            max-width: 800px;\n            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);\n        }\n\n        .vertical-pro-table {\n            width: 100%;\n            border-collapse: collapse;\n            table-layout: fixed; /* 新增：固定表格布局 */\n        }\n\n        /* 核心布局 */\n        .vertical-pro-table tr {\n            display: flex;\n            align-items: center;\n            padding: 12px 20px;\n            min-height: 52px;\n            box-sizing: border-box;\n            width: 100%; /* 新增：确保宽度不溢出 */\n        }\n\n        .vertical-pro-table th {\n            flex: 0 0 18%; /* 固定30%宽度 */\n            color: #1a365d;\n            font-weight: 600;\n            font-size: 14px;\n            padding-right: 15px;\n            border-right: 2px solid #edf2f7;\n            box-sizing: border-box; /* 新增：盒模型计算 */\n            min-width: 0; /* 新增：允许收缩 */\n            text-align: left;\n        }\n\n        .vertical-pro-table td {\n            flex: 1; /* 自动填充剩余70% */\n            display: flex;\n            align-items:center;\n            position: relative;\n            color: #4a5568;\n            font-size: 14px;\n            padding-left: 10px;\n            line-height: 1.5;\n            box-sizing: border-box; /* 新增：盒模型计算 */\n            min-width: 0; /* 新增：允许收缩 */\n            overflow-wrap: break-word; /* 新增：强制换行 */\n        }\n\n        /* 双行斑马纹 */\n        .vertical-pro-table tr:nth-child(4n+1),\n        .vertical-pro-table tr:nth-child(4n+2) {\n            background: #d2dbe5;\n        }\n\n        .vertical-pro-table tr:nth-child(4n+3),\n        .vertical-pro-table tr:nth-child(4n+4) {\n            background: #fff;\n        }\n\n        /* 滚动条美化 */\n        .vars-container::-webkit-scrollbar {\n            width: 8px;\n            background: #f1f5f9;\n        }\n\n        .vars-container::-webkit-scrollbar-thumb {\n            background: #cbd5e1;\n            border-radius: 4px;\n        }\n\n        /* 分隔线优化 */\n        .vertical-pro-table tr:not(:last-child) {\n            border-bottom: 1px solid #e2e8f0;\n        }\n\n        /* 搜索容器 */\n        .search-box{\n          padding-top: .1em;\n        }\n\n        /* 搜索输入框 */\n        .search-input {\n          width: 70%;\n          padding: 5px 20px;\n          font-size: 15px;\n          border: 2px solid #e2e8f0;\n          border-radius: 8px;\n          background: white;\n          box-shadow: 0 2px 4px rgba(160,174,192,0.1);\n          transition: all 0.3s ease;\n          box-sizing: border-box;\n        }\n\n        .search-input:focus {\n          outline: none;\n          border-color: #4299e1;\n          box-shadow: 0 2px 8px rgba(66,153,225,0.2);\n        }\n\n        /* 搜索历史容器 */\n        .search-history {\n          margin-top: 12px;\n          display: flex;\n          align-items: center;\n          flex-wrap: wrap;\n          gap: 8px;\n          color: #718096;\n          font-size: 13px;\n          display: none;\n        }\n\n        /* 历史记录项 */\n        .history-item {\n          display: inline-flex;\n          align-items: center;\n          padding: 6px 12px;\n          background: #f7fafc;\n          border-radius: 6px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          border: 1px solid #e2e8f0;\n          color: #4a5568;\n        }\n\n        .history-item:hover {\n          background: #ebf8ff;\n          border-color: #bee3f8;\n          transform: translateY(-1px);\n        }\n\n        .history-item::before {\n          content: "#";\n          margin-right: 4px;\n          color: #a0aec0;\n        }\n\n        .close-btn {\n          position: absolute;\n          top: 10px;\n          right: 10px;\n          width: 32px;\n          height: 32px;\n          border: none;\n          border-radius: 50%;\n          background: #f0f0f0;\n          cursor: pointer;\n          font-size: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s ease;\n        }\n\n        .close-btn:hover {\n          background: #e0e0e0;\n          transform: rotate(90deg);\n        }\n\n        .button-group {\n          margin-top: 15px;\n          display: flex;\n          gap: 12px;\n          justify-content: flex-end;\n        }\n\n        button {\n          padding: 10px 24px;\n          border: none;\n          border-radius: 6px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: \n            transform 0.1s ease,\n            box-shadow 0.2s ease,\n            background 0.2s ease;\n        }\n\n        button:active {\n          transform: translateY(1px);\n        }\n\n        .reset {\n          background: #f5f5f5;\n          color: #666;\n        }\n\n        .reset:hover {\n          background: #eee;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        }\n\n        .save {\n          background: #2196F3;\n          color: white;\n        }\n\n        .save:hover {\n          background: #1976D2;\n          box-shadow: 0 2px 8px rgba(33,150,243,0.3);\n        }\n\n        textarea {\n          min-height: 60%;\n          margin: 15px 0;\n          padding: 12px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          resize: vertical;\n          font-family: monospace;\n        }            \n      ';const o=document.createElement("div");return o.className="container",o.innerHTML='\n        <div class="left-panel">\n          <div class="search-box">\n            <h3 style="display:inline-block">CSS变量列表</h3>\n            <input type="text" placeholder="搜索变量..." class="search-input">\n          </div>\n          <div class="search-history"></div>\n          <div class="vars-container"> <!-- 新增滚动容器 -->\n            <table class="vertical-pro-table">\n              <tbody class="vars-body"></tbody>\n            </table>\n          </div>\n        </div>\n        <div class="right-panel">\n          <button class="close-btn">×</button>\n          <h3>自定义CSS</h3>\n          <textarea placeholder="输入CSS样式..."></textarea>\n          <div class="button-group">\n            <button class="reset">重置</button>\n            <button class="save">保存</button>\n          </div>\n        </div>\n      ',e.appendChild(t),e.appendChild(o),document.body.appendChild(n),n}function t(){const n=getComputedStyle(document.documentElement);return u.cssVariables.map(e=>{const t=n.getPropertyValue(e).trim();return{name:e,value:t,isColor:/^(#|rgb|hsl)/.test(t)}})}function o(n=""){const e=t(),o=n.trim().length>0,a=o?e.filter(e=>e.name.toLowerCase().includes(n)||e.value.toLowerCase().includes(n)):e,i=d.shadowRoot.querySelector(".vars-body");i.innerHTML=a.map(n=>`\n          <tr>\n            <th>变量名</th>\n            <td>${n.name}</td>\n          <tr>\n            <th>变量值</th>\n            <td>\n              ${n.value}\n              ${n.isColor?`<div class="color-block" style="background:${n.value}"></div>`:""}\n            </td>\n          </tr>\n        `).join(""),0===a.length&&(i.innerHTML=`\n            <tr>\n              <td colspan="2" style="text-align:center;color:#999">\n                ${o?"没有找到匹配的变量":"暂无配置变量"}\n              </td>\n            </tr>\n          `)}function a(n){const e=JSON.parse(localStorage.getItem(LS_CSS_CHANGE_DOCSIFY_CSS_VAR_SEARCH_HISTORY)||"[]");if(!n||e.includes(n))return;e.unshift(n),e.length>5&&e.pop(),localStorage.setItem(LS_CSS_CHANGE_DOCSIFY_CSS_VAR_SEARCH_HISTORY,JSON.stringify(e));const t=d.shadowRoot.querySelector(".search-history");t.innerHTML="最近搜索: "+e.map(n=>`<span class="history-item">${n}</span>`).join(""),t.querySelectorAll(".history-item").forEach(n=>{n.addEventListener("click",()=>{const e=d.shadowRoot.querySelector(".search-input");e.value=n.textContent,o(n.textContent)})})}function i(){const n=d.shadowRoot.querySelector(".search-input"),e=()=>{const e=n.value.toLowerCase();o(e),a(e)};o(),n.addEventListener("input",e),n.addEventListener("keypress",n=>{"Enter"===n.key&&e()})}function r(){const n=localStorage.getItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);if(n){const e=document.getElementById(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);e&&e.remove();const t=document.createElement("style");t.id=LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS,t.textContent=n,document.head.appendChild(t)}}function s(){d.classList.add("active"),document.body.style.overflow="hidden"}function l(){n(),c(),r(),i()}function c(){d=e(),p=d.shadowRoot.querySelector("textarea"),p.value=localStorage.getItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS)||"",p.addEventListener("keydown",function(n){if("Tab"===n.key||9===n.keyCode){n.preventDefault();const e=this.selectionStart,t=this.selectionEnd,o=this.value;if(n.shiftKey){const n=o.substring(0,e).split("\n"),a=o.substring(t).split("\n"),i=o.substring(e,t),r=i.replace(/^ /gm,"");this.value=[...n.slice(0,-1),n[n.length-1]+r+a[0],...a.slice(1)].join("\n");const s=i.length-r.length;this.selectionStart=Math.max(e-s,0),this.selectionEnd=t-s}else{const n=o.substring(0,e).split("\n"),a=o.substring(t).split("\n"),i=o.substring(e,t),r=i.replace(/^/gm,"  ");this.value=[...n.slice(0,-1),n[n.length-1]+r+a[0],...a.slice(1)].join("\n");r.split("\n").length;this.selectionStart=e+(e===t?2:0),this.selectionEnd=t+r.length-i.length}}}),d.shadowRoot.querySelector(".close-btn").addEventListener("click",()=>{d.classList.remove("active"),document.body.style.overflow="auto"}),d.shadowRoot.querySelector(".reset").addEventListener("click",()=>{if(confirm("确定要重置所有自定义样式吗？")){localStorage.removeItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);const n=document.getElementById(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);n&&n.remove(),p.value=""}}),d.shadowRoot.querySelector(".save").addEventListener("click",()=>{try{const n=p.value,e=document.createElement("style");e.textContent=n,document.head.appendChild(e),e.remove(),localStorage.setItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS,n),r()}catch(n){alert("CSS语法错误,请检查后重试")}})}let d,p,u={cssVariables:[]};return{init:l,show:s}}(),t=function(){function n(){const n=localStorage.getItem(LS_PRISM_THEME_MANAGER_PRISM_THEME);a=o.findIndex(e=>e===n),-1===a&&(a=0),t(a)}function e(){t(a+1)}function t(n){a=(n+o.length)%o.length;const e=`//cdn.jsdelivr.net/npm/prismjs/themes/${o[a]}`;i||(i=document.createElement("link"),i.rel="stylesheet",document.head.appendChild(i)),i.href=e,localStorage.setItem(LS_PRISM_THEME_MANAGER_PRISM_THEME,o[a])}const o=["prism.min.css","prism-coy.min.css","prism-dark.min.css","prism-funky.min.css","prism-okaidia.min.css","prism-solarizedlight.min.css","prism-tomorrow.min.css","prism-twilight.min.css"];let a=0,i=null;return{init:n,nextTheme:e,applyTheme:t,getCurrentTheme:()=>o[a],getThemes:()=>[...o]}}(),o=[{icon:"fas fa-gears",text:"设置",id:"createControlPanel",hideOnTouch:!0,action:()=>e.show()},{get icon(){return`fas ${n.isDark?"fa-sun":"fa-moon"}`},get text(){return n.isDark?"亮色主题":"暗色主题"},action:()=>n.toggle(),isThemeButton:!0},{icon:"fas fa-palette",text:"代码主题",action:()=>t.nextTheme()},{icon:"fas fa-angle-up",text:"顶部",action:()=>window.scrollTo(0,0)},{icon:"fas fa-home",text:"首页",action:()=>window.location.href="/notes/#/"}],a="ontouchstart"in window||navigator.maxTouchPoints>0,i=document.createElement("div");i.className="flat-button-container",document.body.appendChild(i);const r=document.createElement("div");r.className="button-trigger",document.body.appendChild(r),o.filter(n=>!(a&&n.hideOnTouch)).forEach((e,t)=>{const o=document.createElement("button");o.className="flat-button",e.id&&(o.id=e.id),o.innerHTML=`<i class="${"function"==typeof e.icon?e.icon():e.icon}"></i>`,e.action&&o.addEventListener("click",e.action);const a=document.createElement("span");a.className="button-label",a.textContent="function"==typeof e.text?e.text():e.text,o.appendChild(a),e.isThemeButton&&n.registerThemeButton(o),i.appendChild(o)});const s=document.createElement("style");s.textContent="\n      .button-trigger {\n        position: fixed;\n        bottom: 0px;\n        right: 0px;\n        width: 40px;\n        height: 200px;\n        background: transparent;\n        z-index: 1000;\n        cursor: pointer;\n        transition: opacity 0.3s;\n      }\n\n      .flat-button-container {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        display: flex;\n        gap: 15px;\n        z-index: 999;\n        flex-direction: column-reverse;\n        align-items: flex-end;\n        opacity: 0;\n        pointer-events: none;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n\n      .flat-button-container.visible {\n        opacity: 1;\n        pointer-events: auto;\n      }\n\n      .flat-button {\n        width: 40px;\n        height: 40px;\n        border-radius: 20px;\n        background: #42b983;\n        border: none;\n        cursor: pointer;\n        box-shadow: 0 2px 5px rgba(0,0,0,0.3);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        position: relative;\n        color: white;\n      }\n\n      /* 保持原有悬停效果 */\n      .flat-button:hover {\n        width: auto;\n        padding: 0 15px;\n        border-radius: 20px;\n        transform: translateX(-8px);\n        background: #42b983dd;\n      }\n\n      .button-label {\n        max-width: 0;\n        overflow: hidden;\n        opacity: 0;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        white-space: nowrap;\n        pointer-events: none;\n        position: absolute;\n        right: calc(100% + 10px); /* 初始位置在按钮左侧外 */\n        top: 50%;\n        transform: translateY(-50%);\n        background: rgba(0, 0, 0, 0.6); /* 提高透明度 */\n        padding: 5px 12px;\n        border-radius: 4px;\n        color: white;\n        font-size: 14px;\n        backdrop-filter: blur(8px); /* 增强模糊效果 */\n        border: 1px solid rgba(255,255,255,0.15);\n        box-shadow: 0 4px 12px rgba(0,0,0,0.25);\n\n     }\n      .flat-button:hover .button-label {\n        max-width: 200px;\n        opacity: 0.9; /* 悬停时稍提高可见性 */\n        right: calc(100% + 10px); /* 最终停留在按钮左侧 */\n      }\n\n      /* 箭头调整到右侧 */\n      .button-label::after {\n        content: '';\n        position: absolute;\n        left: 100%;\n        top: 50%;\n        transform: translateY(-50%);\n        border-width: 5px;\n        border-style: solid;\n        border-color: transparent transparent transparent rgba(0, 0, 0, 0.6);\n      }\n\n      /* 按钮悬停动画优化 */\n      .flat-button:hover {\n        transform: translateX(-8px); /* 向左移动留出标签空间 */\n        background: #42b983dd; /* 带透明度的背景色 */\n      }\n",document.head.appendChild(s),r.addEventListener("mouseenter",()=>{i.classList.add("visible"),r.style.display="none"}),i.addEventListener("mouseleave",()=>{i.classList.remove("visible"),r.style.display="block"}),a&&(r.addEventListener("touchstart",n=>{n.stopPropagation(),i.classList.add("visible"),r.style.display="none"}),document.addEventListener("touchstart",n=>{i.contains(n.target)||(i.classList.remove("visible"),r.style.display="block")}),i.addEventListener("touchstart",n=>{n.stopPropagation()})),t.init(),e.init()})});