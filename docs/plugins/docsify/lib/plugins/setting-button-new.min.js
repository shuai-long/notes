const LS_THEME_MANAGER_DOCSIFY_THEME="docsifyTheme",LS_PRISM_THEME_MANAGER_PRISM_THEME="prism-theme",LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS="docsify-custom-css",LS_CSS_CHANGE_DOCSIFY_CSS_VAR_SEARCH_HISTORY="cssVarSearchHistory";(function(){var n=localStorage.getItem(LS_THEME_MANAGER_DOCSIFY_THEME);if(!n&&window.matchMedia&&(n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),n){var t=document.querySelector('link[title="light"]'),e=document.querySelector('link[title="dark"]');t&&e&&("dark"===n?(t.disabled=!0,e.disabled=!1):(t.disabled=!1,e.disabled=!0)),localStorage.setItem(LS_THEME_MANAGER_DOCSIFY_THEME,n)}})(),window.$docsify=window.$docsify||{},window.$docsify.plugins=(window.$docsify.plugins||[]).concat(function(n,t){n.mounted(function(){const n=(()=>{function n(){o="dark"===o?"light":"dark";const n=document.getElementById("themeable-setting");n&&n.remove(),a&&(a.disabled="light"!==o),i&&(i.disabled="dark"!==o),document.documentElement.setAttribute("data-theme",o);try{localStorage.setItem(LS_THEME_MANAGER_DOCSIFY_THEME,o)}catch(n){}e();const t=new CustomEvent("theme-change",{detail:o});document.dispatchEvent(t)}function t(n){s.add(n),e()}function e(){const n="dark"===o?"fa-sun":"fa-moon",t="dark"===o?"亮色主题":"暗色主题";s.forEach(e=>{const o=e.querySelector("i");o&&(o.className=`fas ${n}`);const a=e.querySelector(".button-label");a&&(a.textContent=t)})}let o;try{o=localStorage.getItem(LS_THEME_MANAGER_DOCSIFY_THEME)}catch(n){o=null}o||(o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-theme",o);const a=document.getElementById("docsify-theme-light")||document.querySelector('link[data-theme="light"][rel="stylesheet"]'),i=document.getElementById("docsify-theme-dark")||document.querySelector('link[data-theme="dark"][rel="stylesheet"]');a&&(a.disabled="light"!==o),i&&(i.disabled="dark"!==o);const s=new Set;return{toggle:n,registerThemeButton:t,updateThemeElements:e,get isDark(){return"dark"===o}}})(),t=function(){async function n(){try{const n=await fetch("/metadata/css-vars-config.json");h=await n.json(),Array.isArray(h.cssVariables)||(console.error('配置文件格式错误，应为 { "cssVariables": [...] }'),h.cssVariables=[])}catch(n){console.error("配置文件加载失败:",n),h.cssVariables=[]}}function t(){const n=document.createElement("div"),t=n.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent="\n        :host {\n          display: none !important;\n          justify-content: center;\n          align-items: flex-start;\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: rgba(0,0,0,0.6);\n          backdrop-filter: blur(3px);\n          z-index: 10000;\n          transition: opacity 0.3s ease;\n          overflow: auto;\n          padding: 40px 20px;\n          opacity: 0;\n        }\n      \n        :host(.active) {\n          display: flex !important;\n          justify-content: center;\n          align-items: flex-start;\n          opacity: 1;\n        }\n      \n        .container {\n          display: flex;\n          flex-direction: row;\n          background: #f8f9fa;\n          border-radius: 12px;\n          box-shadow: 0 10px 30px rgba(0,0,0,0.15);\n          width: 90%;\n          max-width: 1200px;\n          min-height: 60vh;\n          max-height: 90vh;\n          transform: translateY(-20px);\n          transition: transform 0.3s ease;\n          position: relative;\n        }\n      \n        :host(.active) .container {\n          transform: translateY(0);\n        }\n      \n        /* 左侧面板 */\n        .left-panel {\n          flex: 0 0 40%;\n          display: flex;\n          flex-direction: column;\n          border-right: 1px solid rgba(0,0,0,0.08);\n          background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);\n          padding: 25px;\n          min-width: 400px;\n        }\n      \n        /* 右侧面板 */\n        .right-panel {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          padding: 25px;\n          position: relative;\n          min-width: 0; /* 修复内容溢出 */\n        }\n      \n        /* 表格容器 */\n        .vars-container {\n          flex: 1;\n          overflow: hidden;\n          margin-top: 20px;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n        }\n      \n        table {\n          width: 100%;\n          border-collapse: collapse;\n          table-layout: fixed;\n        }\n      \n        thead {\n          background: linear-gradient(135deg, #3498db, #2980b9);\n        }\n      \n        tbody {\n          display: block;\n          height: calc(60vh - 200px);\n          overflow-y: auto;\n        }\n      \n        thead tr {\n          display: table;\n          width: 100%;\n        }\n      \n        tr {\n          display: table;\n          width: 100%;\n          table-layout: fixed;\n        }\n      \n        th, td {\n          padding: 14px 16px;\n          text-align: left;\n          word-break: break-word;\n        }\n      \n        th {\n          color: white;\n          font-weight: 500;\n        }\n      \n        td {\n          border-bottom: 1px solid #f0f0f0;\n          background: rgba(255,255,255,0.95);\n          transition: background 0.2s ease;\n        }\n      \n        tr:hover td {\n          background: #f5f9fd;\n        }\n      \n        /* 其他美化样式保持原样 */\n        .close-btn {\n          position: absolute;\n          top: 15px;\n          right: 15px;\n          background: none;\n          border: none;\n          font-size: 1.5em;\n          cursor: pointer;\n          color: #666;\n          transition: all 0.3s ease;\n        }\n      \n        .close-btn:hover {\n          color: #333;\n          transform: rotate(90deg);\n        }\n      \n        /* 确保编辑器区域高度正确 */\n        textarea {\n          flex: 1;\n          margin: 15px 0;\n          resize: none;\n        }\n      \n        /* 响应式调整 */\n        @media (max-width: 768px) {\n          .container {\n            flex-direction: column;\n            max-height: 90vh;\n          }\n      \n          .left-panel, .right-panel {\n            flex: none;\n            width: 100% !important;\n            min-width: auto;\n          }\n      \n          .left-panel {\n            border-right: none;\n            border-bottom: 1px solid rgba(0,0,0,0.08);\n          }\n      \n          tbody {\n            height: calc(40vh - 120px);\n          }\n        }\n      ";const o=document.createElement("div");return o.className="container",o.innerHTML='\n        <div class="left-panel">\n          <h3>CSS变量列表</h3>\n          <div class="search-box">\n            <input type="text" placeholder="搜索变量..." class="search-input">\n            <button class="search-btn">搜索</button>\n            <div class="search-history"></div>\n          </div>\n          <div class="vars-container"> <!-- 新增滚动容器 -->\n            <table>\n              <thead>\n                <tr><th>变量名</th><th>值</th></tr>\n              </thead>\n              <tbody class="vars-body"></tbody>\n            </table>\n          </div>\n        </div>\n        <div class="right-panel">\n          <button class="close-btn">×</button>\n          <h3>自定义CSS</h3>\n          <textarea placeholder="输入CSS样式..."></textarea>\n          <div class="button-group">\n            <button class="reset">重置</button>\n            <button class="save">保存</button>\n          </div>\n        </div>\n      ',t.appendChild(e),t.appendChild(o),document.body.appendChild(n),n}function e(){const n=getComputedStyle(document.documentElement);return h.cssVariables.map(t=>{const e=n.getPropertyValue(t).trim();return{name:t,value:e,isColor:/^(#|rgb|hsl)/.test(e)}})}function o(n=""){const t=e(),o=n.trim().length>0,a=o?t.filter(t=>t.name.toLowerCase().includes(n)||t.value.toLowerCase().includes(n)):t,i=d.shadowRoot.querySelector(".vars-body");i.innerHTML=a.map(n=>`\n          <tr>\n            <td>${n.name}</td>\n            <td>\n              ${n.value}\n              ${n.isColor?`<div class="color-block" style="background:${n.value}"></div>`:""}\n            </td>\n          </tr>\n        `).join(""),0===a.length&&(i.innerHTML=`\n            <tr>\n              <td colspan="2" style="text-align:center;color:#999">\n                ${o?"没有找到匹配的变量":"暂无配置变量"}\n              </td>\n            </tr>\n          `)}function a(n){const t=JSON.parse(localStorage.getItem(LS_CSS_CHANGE_DOCSIFY_CSS_VAR_SEARCH_HISTORY)||"[]");if(!n||t.includes(n))return;t.unshift(n),t.length>5&&t.pop(),localStorage.setItem(LS_CSS_CHANGE_DOCSIFY_CSS_VAR_SEARCH_HISTORY,JSON.stringify(t));const e=d.shadowRoot.querySelector(".search-history");e.innerHTML="最近搜索: "+t.map(n=>`<span class="history-item">${n}</span>`).join(""),e.querySelectorAll(".history-item").forEach(n=>{n.addEventListener("click",()=>{const t=d.shadowRoot.querySelector(".search-input");t.value=n.textContent,o(n.textContent)})})}function i(){const n=d.shadowRoot.querySelector(".search-btn"),t=d.shadowRoot.querySelector(".search-input"),e=()=>{const n=t.value.toLowerCase();o(n),a(n)};o(),n.addEventListener("click",e),t.addEventListener("input",e),t.addEventListener("keypress",n=>{"Enter"===n.key&&e()})}function s(){const n=localStorage.getItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);if(n){const t=document.getElementById(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);t&&t.remove();const e=document.createElement("style");e.id=LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS,e.textContent=n,document.head.appendChild(e)}}function r(){d.classList.add("active")}function l(){n(),c(),s(),i(),o()}function c(){d=t(),u=d.shadowRoot.querySelector("textarea"),u.value=localStorage.getItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS)||"",u.addEventListener("keydown",function(n){if("Tab"===n.key||9===n.keyCode){n.preventDefault();const t=this.selectionStart,e=this.selectionEnd,o=this.value;if(n.shiftKey){const n=o.substring(0,t).split("\n"),a=o.substring(e).split("\n"),i=o.substring(t,e),s=i.replace(/^ /gm,"");this.value=[...n.slice(0,-1),n[n.length-1]+s+a[0],...a.slice(1)].join("\n");const r=i.length-s.length;this.selectionStart=Math.max(t-r,0),this.selectionEnd=e-r}else{const n=o.substring(0,t).split("\n"),a=o.substring(e).split("\n"),i=o.substring(t,e),s=i.replace(/^/gm,"  ");this.value=[...n.slice(0,-1),n[n.length-1]+s+a[0],...a.slice(1)].join("\n");s.split("\n").length;this.selectionStart=t+(t===e?2:0),this.selectionEnd=e+s.length-i.length}}}),d.shadowRoot.querySelector(".close-btn").addEventListener("click",()=>{d.classList.remove("active")}),d.shadowRoot.querySelector(".reset").addEventListener("click",()=>{if(confirm("确定要重置所有自定义样式吗？")){localStorage.removeItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);const n=document.getElementById(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS);n&&n.remove(),u.value="",d.classList.remove("active")}}),d.shadowRoot.querySelector(".save").addEventListener("click",()=>{try{const n=u.value,t=document.createElement("style");t.textContent=n,document.head.appendChild(t),t.remove(),localStorage.setItem(LS_CSS_CHANGE_DOCSIFY_CUSTOM_CSS,n),d.classList.remove("active"),s()}catch(n){alert("CSS语法错误,请检查后重试")}})}let d,u,h={cssVariables:[]};return{init:l,show:r}}(),e=function(){function n(){const n=localStorage.getItem(LS_PRISM_THEME_MANAGER_PRISM_THEME);a=o.findIndex(t=>t===n),-1===a&&(a=0),e(a)}function t(){e(a+1)}function e(n){a=(n+o.length)%o.length;const t=`//cdn.jsdelivr.net/npm/prismjs/themes/${o[a]}`;i||(i=document.createElement("link"),i.rel="stylesheet",document.head.appendChild(i)),i.href=t,localStorage.setItem(LS_PRISM_THEME_MANAGER_PRISM_THEME,o[a])}const o=["prism.min.css","prism-coy.min.css","prism-dark.min.css","prism-funky.min.css","prism-okaidia.min.css","prism-solarizedlight.min.css","prism-tomorrow.min.css","prism-twilight.min.css"];let a=0,i=null;return{init:n,nextTheme:t,applyTheme:e,getCurrentTheme:()=>o[a],getThemes:()=>[...o]}}(),o=[{icon:"fas fa-gears",text:"设置",id:"createControlPanel",hideOnTouch:!1,action:()=>t.show()},{get icon(){return`fas ${n.isDark?"fa-sun":"fa-moon"}`},get text(){return n.isDark?"亮色主题":"暗色主题"},action:()=>n.toggle(),isThemeButton:!0},{icon:"fas fa-palette",text:"代码主题",action:()=>e.nextTheme()},{icon:"fas fa-angle-up",text:"顶部",action:()=>window.scrollTo(0,0)},{icon:"fas fa-home",text:"首页",action:()=>window.location.href="/notes/#/"}],a="ontouchstart"in window||navigator.maxTouchPoints>0,i=document.createElement("div");i.className="flat-button-container",document.body.appendChild(i);const s=document.createElement("div");s.className="button-trigger",document.body.appendChild(s),o.filter(n=>!(a&&n.hideOnTouch)).forEach((t,e)=>{const o=document.createElement("button");o.className="flat-button",t.id&&(o.id=t.id),o.innerHTML=`<i class="${"function"==typeof t.icon?t.icon():t.icon}"></i>`,t.action&&o.addEventListener("click",t.action);const a=document.createElement("span");a.className="button-label",a.textContent="function"==typeof t.text?t.text():t.text,o.appendChild(a),t.isThemeButton&&n.registerThemeButton(o),i.appendChild(o)});const r=document.createElement("style");r.textContent="\n      .button-trigger {\n        position: fixed;\n        bottom: 0px;\n        right: 0px;\n        width: 40px;\n        height: 200px;\n        background: transparent;\n        z-index: 1000;\n        cursor: pointer;\n        transition: opacity 0.3s;\n      }\n\n      .flat-button-container {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        display: flex;\n        gap: 15px;\n        z-index: 999;\n        flex-direction: column-reverse;\n        align-items: flex-end;\n        opacity: 0;\n        pointer-events: none;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n\n      .flat-button-container.visible {\n        opacity: 1;\n        pointer-events: auto;\n      }\n\n      .flat-button {\n        width: 40px;\n        height: 40px;\n        border-radius: 20px;\n        background: #42b983;\n        border: none;\n        cursor: pointer;\n        box-shadow: 0 2px 5px rgba(0,0,0,0.3);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        position: relative;\n        color: white;\n      }\n\n      /* 保持原有悬停效果 */\n      .flat-button:hover {\n        width: auto;\n        padding: 0 15px;\n        border-radius: 20px;\n        transform: translateX(-8px);\n        background: #42b983dd;\n      }\n\n      .button-label {\n        max-width: 0;\n        overflow: hidden;\n        opacity: 0;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        white-space: nowrap;\n        pointer-events: none;\n        position: absolute;\n        right: calc(100% + 10px); /* 初始位置在按钮左侧外 */\n        top: 50%;\n        transform: translateY(-50%);\n        background: rgba(0, 0, 0, 0.6); /* 提高透明度 */\n        padding: 5px 12px;\n        border-radius: 4px;\n        color: white;\n        font-size: 14px;\n        backdrop-filter: blur(8px); /* 增强模糊效果 */\n        border: 1px solid rgba(255,255,255,0.15);\n        box-shadow: 0 4px 12px rgba(0,0,0,0.25);\n\n     }\n      .flat-button:hover .button-label {\n        max-width: 200px;\n        opacity: 0.9; /* 悬停时稍提高可见性 */\n        right: calc(100% + 10px); /* 最终停留在按钮左侧 */\n      }\n\n      /* 箭头调整到右侧 */\n      .button-label::after {\n        content: '';\n        position: absolute;\n        left: 100%;\n        top: 50%;\n        transform: translateY(-50%);\n        border-width: 5px;\n        border-style: solid;\n        border-color: transparent transparent transparent rgba(0, 0, 0, 0.6);\n      }\n\n      /* 按钮悬停动画优化 */\n      .flat-button:hover {\n        transform: translateX(-8px); /* 向左移动留出标签空间 */\n        background: #42b983dd; /* 带透明度的背景色 */\n      }\n",document.head.appendChild(r),s.addEventListener("mouseenter",()=>{i.classList.add("visible"),s.style.display="none"}),i.addEventListener("mouseleave",()=>{i.classList.remove("visible"),s.style.display="block"}),a&&(s.addEventListener("touchstart",n=>{n.stopPropagation(),i.classList.add("visible"),s.style.display="none"}),document.addEventListener("touchstart",n=>{i.contains(n.target)||(i.classList.remove("visible"),s.style.display="block")}),i.addEventListener("touchstart",n=>{n.stopPropagation()})),e.init(),t.init()})});